{% extends 'base.html' %}
{% block title %}Cadastro{% endblock %}
{% block conteudo %}
<div class="row justify-content-center">
  <form method="POST" action="/cadastro" class="col-sm-10 col-md-8 col-lg-7" onsubmit="return verificarSenhaEmail();">
      <h1 class="display-4">Cadastro de Usuário</h1>
      <div class="form-group">
        <label for="nome">Nome Completo</label>
        <input type="text" id="nome" name="nome" class="form-control" placeholder="Insira seu nome completo" autofocus>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label for="txtEmail">Endereço de Email</label>
          <input type="email" id="txtEmail" name="txtEmail" class="form-control" placeholder="exemplo@mail.com" autofocus>
        </div>
        <div class="form-group">
          <label for="confEmail">Confirme o Email</label>
          <input type="email" id="confEmail" name="confEmail" class="form-control" placeholder="exemplo@mail.com" autofocus>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label for="password">Senha</label>
          <input type="password" id="password" name="password" class="form-control" placeholder="Cadastre uma senha" autofocus>
        </div>
        <div class="form-group">
          <label for="confpassword">Confirme a Senha</label>
          <input type="password" id="confpassword" name="confpassword" class="form-control" placeholder="Confirme a senha" autofocus>
        </div>
      </div>
      <div class="form-group">
        <label for="dn">Data de Nascimento</label>
        <input type="date" id="dn" name="dn" class="form-control" placeholder="Insira sua data de nascimento" autofocus>
      </div>
      <div class="form-group">
        <label for="cpf">CPF</label>
        <input type="text" id="cpf" name="cpf" class="form-control" placeholder="xxx.xxx.xxx-xx" autofocus>
      </div>
      <div class="form-group">
        <label for="cep">Endereço</label>
        <input type="text" id="cep" name="cep" placeholder="CEP" class="form-control" placeholder="CEP" autofocus>
        <input type="text" id="rua" name="rua" placeholder="Rua" class="form-control" placeholder="Rua" autofocus>
        <input type="text" id="num_res" name="num_res" placeholder="Número" class="form-control" placeholder="Número" autofocus>
        <input type="text" id="bairro" name="bairro" placeholder="Bairro" class="form-control" placeholder="Bairro" autofocus>
        <input type="text" id="cidade" name="cidade" placeholder="Cidade" class="form-control" placeholder="Cidade" autofocus>
        <input type="text" id="estado" name="estado" placeholder="Estado" class="form-control" placeholder="Estado" autofocus>
      </div>
      <div class="form-group">
        <label for="tel">Telefone com DDD</label>
        <input type="text" id="tel" name="tel" class="form-control" placeholder="(xx)xxxxx-xxxx" autofocus>
      </div>
      <div class="form-group">
        <label for="genero">Gênero</label>
        <select id="genero" name="genero" class="form-control" required>
          <option value="">Selecione...</option>
          <option value="masculino">Masculino</option>
          <option value="feminino">Feminino</option>
          <option value="nao_identificar">Prefiro não identificar</option>
        </select>
      </div>
      <div class="btn-group" role="group" aria-label="Basic example">
        <button type="reset" class="btn btn-danger btn-lg btn-block">Limpar Formulário</button>
        <button type="submit" class="btn btn-success btn-lg btn-block">Enviar</button>
      </div>
  </form>
</div>

<script>
  function verificarSenhaEmail() {
    var senha = document.getElementById("password").value;
    var confSenha = document.getElementById("confpassword").value;
    var email = document.getElementById("txtEmail").value;
    var confEmail = document.getElementById("confEmail").value;

    if (senha !== confSenha) {
      alert("As senhas não coincidem.");
      return false;
    }

    if (senha.length < 6 || !/[A-Z]/.test(senha) || !/\d/.test(senha) || !/[!@#$%^&*()_+{}\[\]:;<>,.?~\\-]/.test(senha)) {
      alert("A senha deve atender aos seguintes critérios:\n- Deve conter pelo menos 6 caracteres.\n- Deve conter pelo menos 1 letra maiúscula.\n- Deve conter pelo menos 1 número.\n- Deve conter pelo menos 1 caractere especial.");
      return false; 
    }

    if (email !== confEmail) {
      alert("Os endereços de email não coincidem.");
      return false; 
    }

    window.location.href = "/sucesso";
    return false; 
  }
</script>

{% endblock %}
